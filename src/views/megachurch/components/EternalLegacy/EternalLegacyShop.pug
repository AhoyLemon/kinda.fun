Teleport(to="body")
  .eternal-legacy-shop-overlay(@click.self="$emit('close')")
    .eternal-legacy-shop-container
      .shop-header
        h2
          | ETERNAL LEGACY
          small Your Catalog of Divine Prosperity
        button.close-btn(@click="$emit('close')") âœ•
        
      .shop-nav
        button.tab-btn(
          :class="{ active: activeTab === 'mammon' }"
          @click="activeTab = 'mammon'"
        ) The Mammon Collection
        button.tab-btn(
        :class="{ active: activeTab === 'darkDeeds' }"
        @click="activeTab = 'darkDeeds'"
        ) Commit Dark Deeds

      .shop-content
        // Mammon Items Tab
        .mammon-tab(v-if="activeTab === 'mammon'")
          .tab-header
            p.tab-description 
              | Build your eternal legacy with these divinely inspired acquisitions. 
              | Each purchase increases your 
              strong mammon 
              | scoreâ€”your true measure of success.
              
          .items-grid
            .item-card.mammon-card(
              v-for="item in gameSettings.eternalLegacy.shop.mammonItems"
              :key="item.id"
              :class="{ purchased: my.eternalLegacy.purchasedItems.includes(item.id), affordable: my.money >= item.cost }"
            )
              .item-details.mammon-item
                h4.mammon-name {{ item.name }}
                p.item-description {{ item.description }}
                .item-stats
                  .cost {{ dollars(item.cost) }}
                  .mammon-value(v-if="item.mammon") +{{ addCommas(item.mammon) }} mammon
              .item-actions
                button.purchase-btn(
                  v-if="!my.eternalLegacy.purchasedItems.some(p => p.id === item.id)"
                  :disabled="my.money < item.cost"
                  @click="purchaseItem(item, 'mammon')"
                ) 
                  | {{ my.money >= item.cost ? 'Purchase' : 'Too Expensive' }}
                .purchased-indicator(v-else)
                  | Owned

        // Dark Deeds Tab  
        .under-the-table-tab(v-if="activeTab === 'darkDeeds'")
          .tab-header
            p.tab-description 
              | Sometimes prosperity requires... creative arrangements. 
              | All of these opportunities provide  
              strong significant risks
              |  but substantial rewards.
              
          .items-grid
            .item-card(
              v-for="item in gameSettings.eternalLegacy.shop.darkDeeds"
              :key="item.id"
              :class="{ purchased: my.eternalLegacy.purchasedItems.includes(item.id), affordable: my.money >= item.cost, dangerous: true }"
            )
              .item-details
                h4 {{ item.name }}
                p.item-description {{ item.effect }}
                .item-stats
                  .cost(v-if="item.cost") {{ dollars(item.cost) }}
                  .heat(v-if="item.heat > 0") +{{ item.heat }} heat
                  .heat(v-if="item.cutIncreasase") +{{ item.cutIncreasase }}% increase to Sterling's cut
                  .heat(v-if="item.id === 'sterling-cut'") 20% reduction in heat increase
              .item-actions
                template(v-if="item.id === 'sterling-cut' && !my.eternalLegacy.sterlingAlive")
                  .purchased-indicator
                    | ðŸ’€ Sterling is dead.
                template(v-else)
                  button.purchase-btn.dangerous(
                    v-if="!my.eternalLegacy.darkDeeds.some(p => p.id === item.id)"
                    :disabled="my.money < item.cost"
                    @click="purchaseItem(item, 'darkDeeds')"
                  ) 
                    | {{ my.money >= item.cost ? 'Do The Deed' : 'Too Expensive' }}
                  .purchased-indicator(v-else)
                    | âœ… Done

      .shop-footer
        blockquote
          p.bible-verse(v-if="randomBibleVerse")
            | "{{ randomBibleVerse.quote }}"
          cite.sterling-signature
            | {{randomBibleVerse.cite}}, 
            small {{randomBibleVerse.version}}