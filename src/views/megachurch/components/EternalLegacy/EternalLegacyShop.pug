Teleport(to="body")
  .eternal-legacy-shop-overlay(@click.self="$emit('close')")
    .eternal-legacy-shop-container
      .shop-header
        h2
          | ETERNAL LEGACY
          small Your Catalog of Divine Prosperity
        button.close-btn(@click="$emit('close')") âœ•
        
      .shop-nav
        button.tab-btn(
          :class="{ active: activeTab === 'mammon' }"
          @click="activeTab = 'mammon'"
        ) The Mammon Collection
        button.tab-btn(
          :class="{ active: activeTab === 'celebrities' }"
          @click="activeTab = 'celebrities'"
        ) Celebrity Centre
        button.tab-btn(
          :class="{ active: activeTab === 'darkDeeds' }"
          @click="activeTab = 'darkDeeds'"
        ) Commit Dark Deeds
        

      .shop-content
        // Mammon Items Tab
        .mammon-tab(v-if="activeTab === 'mammon'")
          .tab-header
            p.tab-description 
              | Build your eternal legacy with these divinely inspired acquisitions. 
              | Each purchase increases your 
              strong mammon 
              | scoreâ€”your true measure of success.
              
          .items-grid
            .item-card.mammon-card(
              v-for="item in gameSettings.eternalLegacy.shop.mammonItems"
              :key="item.id"
              :class="{ purchased: my.eternalLegacy.purchasedItems.includes(item.id), affordable: my.money >= item.cost }"
            )
              .item-details.mammon-item
                h4.mammon-name {{ item.name }}
                p.item-description {{ item.description }}
                .item-stats
                  .cost {{ dollars(item.cost) }}
                  .mammon-value(v-if="item.mammon") +{{ addCommas(item.mammon) }} mammon
              .item-actions
                button.purchase-btn(
                  v-if="!my.eternalLegacy.purchasedItems.some(p => p.id === item.id)"
                  :disabled="my.money < item.cost"
                  @click="purchaseItem(item, 'mammon')"
                ) 
                  | {{ my.money >= item.cost ? 'Purchase' : 'Too Expensive' }}
                .purchased-indicator(v-else)
                  | Owned

        // Dark Deeds Tab  
        .under-the-table-tab(v-if="activeTab === 'darkDeeds'")
          .tab-header
            p.tab-description 
              | Sometimes prosperity requires... creative arrangements. 
              | All of these opportunities provide  
              strong significant risks
              |  but substantial rewards.
              
          .items-grid
            .item-card(
              v-for="item in gameSettings.eternalLegacy.shop.darkDeeds"
              :key="item.id"
              :class="{ purchased: my.eternalLegacy.purchasedItems.includes(item.id), affordable: my.money >= item.cost, dangerous: true }"
            )
              .item-details
                h4 {{ item.name }}
                p.item-description {{ item.effect }}
                .item-stats
                  .cost(v-if="item.cost") {{ dollars(item.cost) }}
                  .heat(v-if="item.heat > 0") +{{ item.heat }} heat
                  .heat(v-if="item.cutIncreasase") +{{ item.cutIncreasase }}% increase to Sterling's cut
                  .heat(v-if="item.id === 'sterling-cut'") 20% reduction in heat increase
              .item-actions
                template(v-if="item.id === 'sterling-cut' && !my.eternalLegacy.sterlingAlive")
                  .purchased-indicator
                    | ðŸ’€ Sterling is dead.
                template(v-else)
                  button.purchase-btn.dangerous(
                    v-if="!my.eternalLegacy.darkDeeds.some(p => p.id === item.id)"
                    :disabled="my.money < item.cost"
                    @click="purchaseItem(item, 'darkDeeds')"
                  ) 
                    | {{ my.money >= item.cost ? 'Do The Deed' : 'Too Expensive' }}
                  .purchased-indicator(v-else)
                    | âœ… Done

        // Celebrity Centre Tab  
        .celebrity-tab(v-if="activeTab === 'celebrities'")
          .tab-header
            p.tab-description 
              | Enhance your church's prestige with celebrity endorsements. 
              | Each celebrity provides unique benefits and penalties, plus you'll have somebody new to do drugs with.
              
          .items-grid
            .item-card.celebrity-card(
              v-for="celebrity in gameSettings.eternalLegacy.shop.celebrities"
              :key="celebrity.id"
              :class="{ purchased: my.eternalLegacy.purchasedItems.includes(celebrity.id), affordable: my.money >= celebrity.cost }"
            )
              .item-details.celebrity-item
                h4.celebrity-name {{ celebrity.name }}
                p.item-description {{ celebrity.description }}
                .item-stats
                  .cost(v-if="celebrity.cost") {{ dollars(celebrity.cost) }}
                  .cost(v-if="celebrity.dailyCost") {{ dollars(celebrity.dailyCost) }} per day
                  //.mammon-value(v-if="celebrity.mammon") +{{ addCommas(celebrity.mammon) }} mammon
                  p.effect-summary {{ celebrity.effect }}
                  dl.celebrity-effects(v-if="celebrity.hasOneTimeEffects")
                    dt One-Time Effects:
                    dd
                      .mammon(v-if="celebrity.oneTimeEffects.mammon") +{{ addCommas(celebrity.oneTimeEffects.mammon) }} mammon
                      .boost(v-if="celebrity.oneTimeEffects.buzz") {{celebrity.oneTimeEffects.buzz}} attendance boost
                      .boost(v-if="celebrity.oneTimeEffects.religionBoost && celebrity.religions.likedBy.length > 0") {{celebrity.oneTimeEffects.religionBoost}}% boost among {{celebrity.religions.likedBy.join(', ')}}
                      .negative(v-if="celebrity.oneTimeEffects.religionPenalty && celebrity.religions.hatedBy.length > 0") {{Math.abs(celebrity.oneTimeEffects.religionPenalty)}}% reduction among {{celebrity.religions.hatedBy.join(', ')}}
                  dl.celebrity-effects(v-if="celebrity.hasDailyEffects")
                    dt Ongoing Effects:
                    dd
                      .mammon(v-if="celebrity.dailyEffects.mammon") +{{ addCommas(celebrity.dailyEffects.mammon) }} mammon per day
                      .boost(v-if="celebrity.dailyEffects.buzz > 0 ") {{celebrity.dailyEffects.buzz}}% attendance boost
                      .negative(v-if="celebrity.dailyEffects.buzz < 0 ") {{Math.abs(celebrity.dailyEffects.buzz)}}% attendance reduction
                      .boost(v-if="celebrity.dailyEffects.religionBoost && celebrity.religions.likedBy.length > 0") {{celebrity.dailyEffects.religionBoost}}% boost among {{celebrity.religions.likedBy.join(', ')}}
                      .negative(v-if="celebrity.dailyEffects.religionPenalty && celebrity.religions.hatedBy.length > 0") {{Math.abs(celebrity.dailyEffects.religionPenalty)}}% reduction among {{celebrity.religions.hatedBy.join(', ')}}
                
              .item-actions
                button.purchase-btn(
                  v-if="!my.eternalLegacy.purchasedItems.some(p => p.id === celebrity.id)"
                  :disabled="my.money < celebrity.cost"
                  @click="purchaseItem(celebrity, 'celebrities')"
                ) 
                  span(v-if="!celebrity.cost") Get Endorsed
                  span(v-else-if="my.money >= celebrity.cost") Pay For Endorsement
                  span(v-else) Too Expensive
                .purchased-indicator(v-else)
                  | Endorsed

      .shop-footer
        blockquote
          p.bible-verse(v-if="randomBibleVerse")
            | "{{ randomBibleVerse.quote }}"
          cite.sterling-signature
            | {{randomBibleVerse.cite}}, 
            small {{randomBibleVerse.version}}