section.sermon-results(v-if="ui.view === 'sermon-results'")

  .inner
    h2(v-if="my.isStreetPreaching") Your street preaching is complete for the day.
    h2(v-else) Your sermon is complete for the day.

    // Street Preaching Results
    template(v-if="my.isStreetPreaching")


      .audience-reactions(v-if="my.audienceReactions && my.audienceReactions.length > 0")
        table.debug.audience-changes
          caption {{my.streetAttendanceYesterday}} people heard you shout
          thead
            tr
              th Religion
              th ğŸ‘‚
              th ğŸ˜
              th ğŸ˜ 
          tbody
            tr(v-for="reaction in sortedAudienceReactions.filter(r => r.liked > 0 || r.disliked > 0).slice().sort((a, b) => (b.liked + b.disliked + b.neutral) - (a.liked + a.disliked + a.neutral))" :class="{'positive': reaction.liked > reaction.disliked, 'negative': reaction.disliked > reaction.liked}" )
              td 
                span.religion-name {{reaction.name}}
              td.number {{reaction.liked + reaction.disliked + reaction.neutral}}
              td.number
                span.positive(v-if="reaction.liked > 0") {{reaction.liked}}
                span(v-else) 0
              td.number
                span.negative(v-if="reaction.disliked > 0") {{reaction.disliked}}
                span(v-else) 0
              tr.summary(v-if="totalIgnoredAudience > 0")
          tfoot
            tr
              td(colspan="4")
                em {{totalIgnoredAudience}} other people ignored you completely.

      .donations-summary
        dl.money-summary
          .row.total-donations
            dt Total Donations:
            .modifier.empty
            dd 
              .amount {{dollars(my.donationsYesterday)}}
              .donor-count(v-if="my.isStreetPreaching") (from {{my.streetDonorsYesterday}} donors)


    // Church Preaching Results 

    template(v-if="!my.isStreetPreaching")

      table.debug.follower-changes(v-if="!my.isStreetPreaching")
        caption Religious Scorecard
        thead
          tr
            //th(v-if="gameSettings.isDebug") id
            th name
            th before
            th change
            th after
        tbody
          tr(v-for="religion in my.religiousScorecard.filter(r => r.change > 0 || r.change < 0).slice().sort((a, b) => b.change - a.change)" :class="{'positive': religion.change > 0, 'negative': religion.change < 0}")
            td 
              span.religion-name {{religion.name}}
            td.number {{religion.score - religion.change}}
            td.number
              span.positive(v-if="religion.change > 0") {{"+"+religion.change}}
              span.negative(v-else-if="religion.change < 0") {{religion.change}}
            td.number {{religion.score}}
        tfoot
          tr
            td(colspan="4")
              p Your sermon had #[strong {{my.churchAttendanceYesterday || 0}}] attendees today.
              p #[strong {{my.congregation.reduce((sum, group) => sum + group.likes, 0)}}] people liked your sermon.
              p #[strong {{my.congregation.reduce((sum, group) => sum + group.dislikes, 0)}}] people hated it.

      // Debug: Church Attendance Breakdown
      .debug-church-attendance(v-if="!my.isStreetPreaching && gameSettings.isDebug && my.congregation")
        h3 ğŸ› DEBUG: Church Attendance Today
        .attendance-summary
          p 
            strong Total Attendees: {{my.churchAttendanceYesterday || 0}}
            span  (Expected: {{my.congregation.reduce((sum, group) => sum + group.count, 0)}})
        
        table.debug.attendance-breakdown
          thead
            tr
              th Religion
              th Attendees
              th Likes
              th Dislikes
              th Neutral
          tbody
            tr(v-for="group in my.congregation" :key="group.id")
              td {{getReligion(group.id).name || 'Unknown'}}
              td.number {{group.count}}
              td.number.positive {{group.likes}}
              td.number.negative {{group.dislikes}}
              td.number {{group.count - group.likes - group.dislikes}}

      .receipts

        // Other Revenue
        .church-management-summary(v-if="!my.isStreetPreaching && my.church.isFounded")
          template(v-if="my.merchRevenueYesterday > 0")
            h3 Merch Sales Revenue
            .merch-breakdown(v-if="my.merchSalesDetailsYesterday")
              template(v-if="my.merchSalesDetailsYesterday.holyWater.sold > 0")
                dl.merch-item
                  dt Holy Water Bottles:
                  dd {{my.merchSalesDetailsYesterday.holyWater.sold}} sold ({{dollars(my.merchSalesDetailsYesterday.holyWater.revenue)}})
              template(v-if="my.merchSalesDetailsYesterday.prayerCandles.sold > 0")
                dl.merch-item
                  dt Prayer Candles:
                  dd {{my.merchSalesDetailsYesterday.prayerCandles.sold}} sold ({{dollars(my.merchSalesDetailsYesterday.prayerCandles.revenue)}})
              template(v-if="my.merchSalesDetailsYesterday.weightLossTea.sold > 0")
                dl.merch-item
                  dt Weight Loss Tea:
                  dd {{my.merchSalesDetailsYesterday.weightLossTea.sold}} sold ({{dollars(my.merchSalesDetailsYesterday.weightLossTea.revenue)}})
              template(v-if="my.merchSalesDetailsYesterday.beachTowel.sold > 0")
                dl.merch-item
                  dt Beach Towels:
                  dd {{my.merchSalesDetailsYesterday.beachTowel.sold}} sold ({{dollars(my.merchSalesDetailsYesterday.beachTowel.revenue)}})
              template(v-if="my.merchSalesDetailsYesterday.exorcismKit.sold > 0")
                dl.merch-item
                  dt Exorcism Kits:
                  dd {{my.merchSalesDetailsYesterday.exorcismKit.sold}} sold ({{dollars(my.merchSalesDetailsYesterday.exorcismKit.revenue)}})
          
          template(v-if="my.confessionRevenueYesterday > 0")
            h3 VIP Confession Revenue
            dl.confession-revenue
              dt VIP Confessions:
              dd {{dollars(my.confessionRevenueYesterday)}}

        // Money Summary (Donations + Merch - Sterling - Seraph = Player Share)
        .donations-summary
          dl.money-summary
            .row.total-donations
              dt Total Donations:
              .modifier.empty
              dd 
                .amount {{dollars(my.donationsYesterday)}}
                .donor-count(v-if="my.isStreetPreaching") (from {{my.streetDonorsYesterday}} donors)
            .row.merch-sales.plus(v-if="!my.isStreetPreaching && my.merchRevenueYesterday > 0")
              dt Merch Sales:
              .modifier.plus +
              dd {{dollars(my.merchRevenueYesterday)}}
            .row.vip-confessions.plus(v-if="!my.isStreetPreaching && my.confessionRevenueYesterday > 0")
              dt VIP Confessions:
              .modifier.plus +
              dd {{dollars(my.confessionRevenueYesterday)}}
            .row.sterling-cut.minus(v-if="my.sterlingCutYesterday > 0")
              dt Sterling's Cut:
              .modifier.minus -
              dd {{dollars(my.sterlingCutYesterday)}}
            .row.seraph-ai-cost.minus(v-if="my.seraphAICostYesterday > 0")
              dt Seraph AI Subscription:
              .modifier.minus -
              dd {{dollars(my.seraphAICostYesterday)}}
            .row.player-share.equals(v-if="my.playerShareYesterday && my.playerShareYesterday != my.donationsYesterday")
              dt 
                span(v-if="my.sterlingCutYesterday > 0") Your Share:
                span(v-else) Your Earnings:
              .modifier.equals =
              dd {{dollars(my.playerShareYesterday)}}
      
    .buttons
      button.plug(@click="openPlugInterface()") ğŸ“± The Plug
      button.harold(v-if="my.chats.harold.hasContacted && !my.hasVan" @click="openHaroldInterface()") ğŸ“± Uncle Harold
      button.sterling(v-if="my.chats.sterling.hasContacted && my.eternalLegacy.sterlingAlive" @click="openSterlingInterface()") ğŸ“± Sterling Silver
      //button.sterling-voicemail(v-if="my.eternalLegacyVoicemailReplayAvailable" @click="playEternalLegacyVoicemail()") ğŸ“ Replay Sterling's Voicemail
      button.workshop-zone(v-if="my.church.isFounded" @click="showWorkshopZone") ğŸ’» Da Worshop Zone
      button.eternal-legacy(v-if="my.eternalLegacy.isActive" @click="showEternalLegacyShop") ğŸ’» Eternal Legacy
      button.church-inventory(v-if="my.church.isFounded" @click="openChurchInventory") ğŸ“¦ Church Inventory
      button.legacy-status(v-if="my.eternalLegacy.isActive" @click="openLegacyStatus") âš–ï¸ Legacy Status
      button.submit(@click="advanceToNextDay()") Next Day.